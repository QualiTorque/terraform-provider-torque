---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "torque_environment Resource - terraform-provider-torque"
subcategory: ""
description: |-
  Warning: This terraform resource is still in Beta. Use with caution. Issues may be reported in the provider's GitHub repository.
  	Launches a new Torque Environment from an existing blueprint.
  	
  	### Supported Updates:
  	- Environment name
  	- Collaborators
  	- Force destroy - Whether the environment should be force terminated upon failure to terminate it.,
  	
  	### Limitations:
  	- Environment duration cannot be extended.
  	- Environment resource state is not refreshed with actual environment if it drifted
  	- Terminated environment will be removed when running terraform destroy, but other values of the environment concrete state might cause terraform destroy to fail
---

# torque_environment (Resource)

Warning: This terraform resource is still in Beta. Use with caution. Issues may be reported in the provider's GitHub repository.

		Launches a new Torque Environment from an existing blueprint.
		
		### Supported Updates:
		- Environment name
		- Collaborators
		- Force destroy - Whether the environment should be force terminated upon failure to terminate it.,
		
		### Limitations:
		- Environment duration cannot be extended.
		- Environment resource state is not refreshed with actual environment if it drifted
		- Terminated environment will be removed when running terraform destroy, but other values of the environment concrete state might cause terraform destroy to fail

## Example Usage

```terraform
terraform {
  required_providers {
    torque = {
      source = "qualitorque/torque"
    }
  }
}

provider "torque" {
  host  = "https://portal.qtorque.io/"
  space = "space"
  token = "111111111111"
}


resource "torque_environment" "example" {
  blueprint_name   = "Hello World"
  environment_name = "Sample Environment"
  owner_email      = "someone@company.com"
  duration         = "PT2H" # ISO 8601 duration format - must not be specified together with scheduled_end_time. Both can be omitted to create always-on environment.
  space            = "MySpace"
  force_destroy    = true
  inputs = {
    "agent" = "playground",
    "name"  = "name"
  }
  description = "This is a sample environment created using Torque."
  tags = {
    "activity_type" = "demo"
  }
  collaborators = {
    collaborators_emails = []
    all_space_members    = true
  }
  blueprint_source = {
    blueprint_name  = "custom-blueprint"
    repository_name = "custom-repo"
    branch          = "main"
    commit          = "abcd1234"
  }
  scheduled_end_time = "2024-12-31T23:59:59Z" # must not be specified together with duration. Both can be omitted to create always-on environment.
  workflows = [                               # built-in Torque Workflows
    {
      name = "sample-workflow"

      schedules = [
        {
          scheduler  = "0 12 * * *" # CRON expression for scheduling
          overridden = true
        }
      ]

      reminder = 15 # in minutes before execution

      inputs_overrides = {
        "key1" = "value1"
        "key2" = "value2"
      }
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_name` (String) Name of the Torque blueprint that the torque environment will be launched from.
- `environment_name` (String) The name for the newly created environment. Environment name can contain any character including special character and spaces and doesn't have to be unique.

### Optional

- `blueprint_source` (Attributes) Additional details about the blueprint repository to be used. By default, this information is taken from the repository already confiured in the space. (see [below for nested schema](#nestedatt--blueprint_source))
- `collaborators` (Object) Object of collaborators to add to the environment. Provide collaborators_emails list of strings representing emails of users in the account or set all_space_users to true to add everyone in the space (see [below for nested schema](#nestedatt--collaborators))
- `description` (String) The new environment description that will be presented in the Torque following the launch of the environment.
- `duration` (String) Environment duration time in ISO 8601 format: 'P{days}DT{hours}H{minutes}M{seconds}S]]' For example, P0DT2H3M4S. NOTE: Environment request cannot include both 'duration' and 'scheduled_end_time' fields.  If both are not specified the environment will be always on.
- `force_destroy` (Boolean) Indicates whether the environment should be force terminated if any errors occurred during the initial teardown.
- `inputs` (Map of String) Dictionary of key-value string pairs that will be used as values for the blueprint inputs. In case a value is not provided the input default value will be used. If a default value is not set, a validation error will be thrown upon launch. For example: { 'region': 'eu-west-1', 'application version': '1.0.8' }
- `owner_email` (String) The email of the user that should be set as the owner of the new environment. if omitted the current user will be used.
- `scheduled_end_time` (String) Environment scheduled end time in ISO 8601 format For example, 2021-10-06T08:27:05.215Z. NOTE: Environment request cannot include both 'duration' and 'scheduled_end_time' fields. If both are not specified the environment will be always on.
- `space` (String) The space where this environment will be launched
- `tags` (Map of String) Environment blueprint tags /// Dictionary of key-value string pairs that will be used to tag deployed resources in the environment. In case a configured tag value is not provided the tag default value will be used. Note that tags that were configured in the account and space level will be set regardless of this field. For example: { 'activity_type': 'demo'}
- `workflows` (Attributes List) Array of workflows that will be attached and enabled on the new environment. (see [below for nested schema](#nestedatt--workflows))

### Read-Only

- `automation` (Boolean) Indicates if the environment was launched from automation using integrated pipeline tool, For example: Jenkins, GitHub Actions and GitLal CI.
- `id` (String) Id of the environment

<a id="nestedatt--blueprint_source"></a>
### Nested Schema for `blueprint_source`

Optional:

- `blueprint_name` (String) Sandbox blueprint name
- `branch` (String) Use this field to provide a branch from which the blueprint yaml will be launched
- `commit` (String) Use this field to provide a specific commit id from which the blueprint yaml will be launched
- `repository_name` (String) The name of the repo to be used. This repository should be on-boarded to the space prior to launching the environment. In case you want to launch a 'Stored in Torque' Blueprint, you should set this field to 'qtorque'


<a id="nestedatt--collaborators"></a>
### Nested Schema for `collaborators`

Optional:

- `all_space_members` (Boolean)
- `collaborators_emails` (List of String)


<a id="nestedatt--workflows"></a>
### Nested Schema for `workflows`

Optional:

- `inputs_overrides` (Map of String) Dictionary of key-value string pairs that can override the blueprint inputs
- `name` (String) Name of existing and enabled workflow in the space
- `reminder` (Number)
- `schedules` (Attributes List) (see [below for nested schema](#nestedatt--workflows--schedules))

<a id="nestedatt--workflows--schedules"></a>
### Nested Schema for `workflows.schedules`

Optional:

- `overridden` (Boolean) Specify if the workflow schedule can be overridden at launch
- `scheduler` (String) The CRON expression that schedules this workflow
